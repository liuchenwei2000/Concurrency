## 硬件对并发的支持 ##

独占锁是一项悲观锁技术——它假设最坏的情况，并且只有在确保其他线程不会造成干扰的情况下才能执行下去。

对于细粒度的操作，还有另外一种更高效的方法，也是一种乐观锁的方法，通过这种方法可以在不发生干扰的情况下完成更新操作。这种方法需要借助冲突检查机制来判断在更新过程中是否存在来自其他线程的干扰，如果存在，这个操作将失败，并且可以重试。

在针对多处理器操作而设计的处理器中提供了一些特殊指令，用于管理对共享数据的并发访问。几乎所有的现代处理器中都包含了某种形式的原子读-改-写指令，例如比较并交换（CAS：compara and swap）或者关联加载/条件存储。操作系统和 JVM 使用这些指令来实现锁和并发的数据结构，但在 Java5 之前还不能直接使用这些指令。

在原子变量类（AtomicInteger）中使用了底层 JVM 为支持数字类型和引用类型提供的一种高效 CAS 操作，而在 java.util.concurrent 包中的大多数类在实现时则直接或间接地使用了这些原子变量类。